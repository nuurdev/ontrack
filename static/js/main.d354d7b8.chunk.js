(this.webpackJsonpontrack=this.webpackJsonpontrack||[]).push([[0],{33:function(e,a,t){e.exports=t(61)},60:function(e,a,t){},61:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(25),c=t.n(l),o=t(12),s=t(14),m=t(8),i=t(5),u=t(32),p=t(31),g=t(10),E=t(9),d=function(e){var a=e.onChange,t=e.value,n=e.options,l=e.label,c=e.disabled;return r.a.createElement("fieldset",{disabled:c},r.a.createElement(E.a.Group,{as:m.a},r.a.createElement(E.a.Label,{column:!0,sm:"auto"},l),r.a.createElement(i.a,null,r.a.createElement(E.a.Control,{as:"select",onChange:a,value:t},n.map((function(e){return r.a.createElement("option",{key:e},e)}))))))},h=t(18),f=function(e){var a=e.onSearch,t=e.disabled;return r.a.createElement("fieldset",{disabled:t},r.a.createElement(E.a,{onSubmit:function(e){e.preventDefault();var t=e.target.elements.search.value;a(t)}},r.a.createElement(h.a,null,r.a.createElement(E.a.Control,{name:"search",placeholder:"Search for a book","aria-label":"Search for a book"}),r.a.createElement(h.a.Append,null,r.a.createElement(g.a,{variant:"primary",type:"submit"},"Search")))))},b=t(27),v=t.n(b),k=function(e){var a=e.onChange,t=e.data,n=e.page,l=e.itemsPerPage;return r.a.createElement(v.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",pageCount:t?Math.ceil(t.count/l):100,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:a,containerClassName:"pagination",subContainerClassName:"pages pagination",pageLinkClassName:"page-link",pageClassName:"page-item",breakLinkClassName:"page-link",breakClassName:"page-item",activeClassName:"active",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",forcePage:n-1,disableInitialCallback:!0})},y=t(6),P={page:1,itemsPerPage:20,searchTerm:"",itemsPerPageOptions:[10,20,50,100,200]},C=function(e){if(!e.ok)throw Error(e.statusText);return e},N=t(19),O=t(20),w=t.n(O),j=function(e){var a=e.data;return e.loading?r.a.createElement(N.a,{bordered:!0,hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,Array.from(Array(7)).map((function(e,a){return r.a.createElement("td",{key:a},r.a.createElement(w.a,null))})))),r.a.createElement("tbody",null,Array.from(Array(10)).map((function(e,a){return r.a.createElement("tr",{key:a},Array.from(Array(7)).map((function(e,a){return r.a.createElement("td",{key:a},r.a.createElement(w.a,null))})))})))):r.a.createElement(N.a,{bordered:!0,hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,Object.keys(a.books[0]).map((function(e){return r.a.createElement("td",{key:e},e)})))),r.a.createElement("tbody",null,a.books.map((function(e){return r.a.createElement("tr",{key:e.id},Object.keys(e).map((function(a){return r.a.createElement("td",{key:a},e[a])})))}))))},x=function(e){var a=e.message,t=Object(y.d)();return r.a.createElement("div",{className:"container my-3"},r.a.createElement("div",{className:"my-3"},r.a.createElement("h5",null,"Oops something went wrong"),r.a.createElement("span",null,"Error message: ",a)),r.a.createElement(g.a,{variant:"primary",onClick:function(){return t("/",{replace:!0})}},"Try again"))},S=t(30),T=function(e){return P.itemsPerPageOptions.includes(+e.itemsPerPage)?+e.itemsPerPage:P.itemsPerPage},A=function(){var e=Object(y.d)(),a=function(){var e=Object(y.c)(),a=Object(S.parse)(e.search),t=+a.page||P.page,n=a.searchTerm||P.searchTerm,l=T(a),c=r.a.useState(null),s=Object(o.a)(c,2),m=s[0],i=s[1],u=r.a.useState(!0),p=Object(o.a)(u,2),g=p[0],E=p[1],d=r.a.useState(null),h=Object(o.a)(d,2),f=h[0],b=h[1];return r.a.useEffect((function(){E(!0),b(null);var e={page:t,itemsPerPage:l,filters:[{type:"all",values:[n]}]};fetch("http://nyx.vima.ekt.gr:3000/api/books/",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(C).then((function(e){return e.json()})).then((function(e){return i(e)})).then((function(){return E(!1)})).catch((function(e){console.error(e),b(e)}))}),[t,l,n]),[t,n,l,m,g,f]}(),t=Object(o.a)(a,6),n=t[0],l=t[1],c=t[2],E=t[3],h=t[4],b=t[5];return b?r.a.createElement(x,{message:b.message}):r.a.createElement(s.a,{fluid:!0,className:"my-5"},r.a.createElement("div",{className:"my-3"},r.a.createElement("h2",null,"OnTrack Application")),r.a.createElement(m.a,{className:"controls-wrapper"},E&&r.a.createElement(i.a,{xs:9,sm:6},r.a.createElement(f,{onSearch:function(a){e("/?page=".concat(1,"&itemsPerPage=",c,"&searchTerm=").concat(a))},disabled:h})),E&&E.books.length>0&&r.a.createElement(i.a,{xs:"auto"},r.a.createElement(d,{onChange:function(a){var t=a.target.value,r=Math.ceil(E.count/t);e(r<n?"/?page=".concat(r,"&itemsPerPage=").concat(t,"&searchTerm=").concat(l):"/?page=".concat(n,"&itemsPerPage=").concat(t,"&searchTerm=").concat(l))},value:c,options:P.itemsPerPageOptions,label:"Items per page",disabled:h})),E&&E.books.length>0&&r.a.createElement(i.a,{sm:12,style:{overflowX:"auto"}},r.a.createElement(k,{onChange:function(a){var t=Number(a.selected)+1;e("/?page=".concat(t,"&itemsPerPage=").concat(c,"&searchTerm=").concat(l))},data:E,page:n,itemsPerPage:c}))),E&&r.a.createElement(m.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{xs:6},r.a.createElement("span",null,"Returned ",r.a.createElement("strong",null,E.count)," result(s)",l&&" for "),l&&r.a.createElement(p.a,{pill:!0,variant:"secondary",as:g.a,"aria-label":"Remove search",onClick:function(){e("/?page=".concat(1,"&itemsPerPage=",c))}},l," x")),E&&E.books.length>0&&r.a.createElement(i.a,{xs:6},r.a.createElement("span",null,"Page ",r.a.createElement("strong",null,n)," of"," ",Math.ceil(E.count/c))))),h&&!E&&r.a.createElement(m.a,null,r.a.createElement(i.a,null,r.a.createElement(u.a,{animation:"border",variant:"primary"}))),E&&E.books.length>0&&r.a.createElement(m.a,{className:"table-wrapper mt-4"},r.a.createElement(i.a,null,r.a.createElement(j,{data:E,loading:h}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=function(){return r.a.createElement(s.a,{fluid:!0,className:"my-5"},r.a.createElement("h1",null,"404 not found."),r.a.createElement(y.a,{to:"/"},"Back to home page"))};t(60);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y.b,null,r.a.createElement(A,{path:"/"}),r.a.createElement(L,{default:!0}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.d354d7b8.chunk.js.map